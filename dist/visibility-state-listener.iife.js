var VisibilityStateListener=function(e){"use strict";return e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e({}),i=["webkit","ms","o","moz","khtml"],o={error:null,started:!1,value:"visible"},r=t.window||("undefined"==typeof window?void 0:window),u=t.document||("undefined"==typeof document?void 0:document);void 0!==r&&void 0!==u||(o.error="INVALID_GLOBALS");var d=[];void 0!==u&&(d=i.filter((function(e){return e+"Hidden"in u})));var v=d&&d.length>0?d[0]:"",a=v+(v.length>0?"H":"h")+"idden",s=v+(v.length>0?"V":"v")+"isibilityState",l=null;function c(){var e=u[s];e!=o.value&&(o.value=e,n.emit("update",e))}function f(){"visible"!=o.value&&(o.value="visible",n.emit("update","visible"))}function b(){"hidden"!=o.value&&(o.value="hidden",n.emit("update","hidden"))}function m(){void 0!==r&&void 0!==u&&!0!==o.started&&("modern"==l?u.addEventListener(v+"visibilitychange",c,0):"focus-blur"==l?(r.addEventListener("focus",f,!0),r.addEventListener("blur",b,!0)):"focus-blur-ie"==l&&(u.attachEvent("onfocusin",f),u.attachEvent("onfocusout",b)),o.started=!0)}function h(){void 0!==r&&void 0!==u&&!1!==o.started&&("modern"==l?u.removeEventListener(v+"visibilitychange",c,1):"focus-blur"==l?(r.removeEventListener("focus",f,!0),r.removeEventListener("blur",b,!0)):"focus-blur-ie"==l&&(u.detachEvent("onfocusin",f),u.detachEvent("onfocusout",b)),o.started=!1)}return void 0!==u&&(l=a in u?"modern":u.addEventListener?"focus-blur":"focus-blur-ie"),{emitter:n,start:m,pause:h,getError:function(){return o.error},getState:function(){return o.value}}}}(EventEmitterObject);
