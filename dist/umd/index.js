(function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.createVisibilityStateListener=a()}})(function(){return function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b}()({1:[function(a,b){function c(d){const e=d||{},a=Object.keys(e);this._events=0<a.length?a.reduce(function(b,a){return b[a]=Array.isArray(e[a])?e[a]:[e[a]],b},{}):{}}c.prototype._eventsWillBeFiredOnce={},c.prototype.on=function(f,a,b=null){if("function"!=typeof a||"string"!=typeof f)return!1;this._events.hasOwnProperty(f)||(this._events[f]=[]),this._eventsWillBeFiredOnce.hasOwnProperty(f)||(this._eventsWillBeFiredOnce[f]=[]);const c="[object Object]"===Object.prototype.toString.call(b)?b:{once:!1},d=this._events[f].push(a);return c.once&&!0===c.once&&this._eventsWillBeFiredOnce[f].push(d-1),!0},c.prototype.once=function(c,a){return this.on(c,a,{once:!0})},c.prototype.emit=function(e,f=[]){if(!this._events.hasOwnProperty(e)){if("error"==e){const b=f instanceof Error?f:new Error("Unhandled error.");throw b}return!1}const a=Array.isArray(f)?f:[f];for(let b=0;b<this._events[e].length;b++)this._events[e][b].apply(this,a);if(this._eventsWillBeFiredOnce.hasOwnProperty(e))for(var b=0;b<this._eventsWillBeFiredOnce[e].length;b++)this.removeListener(e,this._eventsWillBeFiredOnce[e][b]);return!0},c.prototype.removeListener=function(c,a){this._events[c].splice(a,1)},c.prototype.removeListeners=function(b){return"string"==typeof b&&!!this._events.hasOwnProperty(b)&&(this._events[b]=[],this._eventsWillBeFiredOnce.hasOwnProperty(b)&&(this._eventsWillBeFiredOnce[b]=[]),!0)},c.prototype.flushEventEmitter=function(){this._events={},this._eventsWillBeFiredOnce={}},b.exports=c},{}],2:[function(a,b){function c(a={}){function b(){const a=i[m];a!=g.value&&(g.value=a,f.emit("update"))}function c(){"visible"!=g.value&&(g.value="visible",f.emit("update"))}function e(){"hidden"!=g.value&&(g.value="hidden",f.emit("update"))}const f=new d({}),g={started:!1,value:"visible"},h=kit.getProp(a,"window","undefined"==typeof window?void 0:window),i=kit.getProp(a,"document","undefined"==typeof document?void 0:document);if("undefined"==typeof h||"undefined"==typeof i)return;const j=["webkit","ms","o","moz","khtml"].filter(a=>a+"Hidden"in i),k=j&&0<j.length?j[0]:"",l=k+(0<k.length?"H":"h")+"idden",m=k+(0<k.length?"V":"v")+"isibilityState",n=l in i?"modern":i.addEventListener?"focus-blur":"focus-blur-ie";return{emitter:f,start:function(){"undefined"==typeof h||"undefined"==typeof i||!0===g.started||("modern"==n?i.addEventListener(k+"visibilitychange",b,0):"focus-blur"==n?(h.addEventListener("focus",c,!0),h.addEventListener("blur",e,!0)):"focus-blur-ie"==n&&(i.attachEvent("onfocusin",c),i.attachEvent("onfocusout",e)),g.started=!0)},pause:function(){"undefined"==typeof h||"undefined"==typeof i||!1===g.started||("modern"==n?i.removeEventListener(k+"visibilitychange",b,1):"focus-blur"==n?(h.removeEventListener("focus",c,!0),h.removeEventListener("blur",e,!0)):"focus-blur-ie"==n&&(i.detachEvent("onfocusin",c),i.detachEvent("onfocusout",e)),g.started=!1)},getState:function(){return g.value}}}const d=a("event-emitter-object");b.exports=c},{"event-emitter-object":1}]},{},[2])(2)});