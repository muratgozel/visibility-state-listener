(function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.createVisibilityStateListener=a()}})(function(){return function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b}()({1:[function(a,b){function c(d){const e=d||{},a=Object.keys(e);this._events=0<a.length?a.reduce(function(b,a){return b[a]=Array.isArray(e[a])?e[a]:[e[a]],b},{}):{}}c.prototype._eventsWillBeFiredOnce={},c.prototype.on=function(f,a,b=null){if("function"!=typeof a||"string"!=typeof f)return!1;this._events.hasOwnProperty(f)||(this._events[f]=[]),this._eventsWillBeFiredOnce.hasOwnProperty(f)||(this._eventsWillBeFiredOnce[f]=[]);const c="[object Object]"===Object.prototype.toString.call(b)?b:{once:!1},d=this._events[f].push(a);return c.once&&!0===c.once&&this._eventsWillBeFiredOnce[f].push(d-1),!0},c.prototype.once=function(c,a){return this.on(c,a,{once:!0})},c.prototype.emit=function(e,f=[]){if(!this._events.hasOwnProperty(e)){if("error"==e){const b=f instanceof Error?f:new Error("Unhandled error.");throw b}return!1}const a=Array.isArray(f)?f:[f];for(let b=0;b<this._events[e].length;b++)this._events[e][b].apply(this,a);if(this._eventsWillBeFiredOnce.hasOwnProperty(e))for(var b=0;b<this._eventsWillBeFiredOnce[e].length;b++)this.removeListener(e,this._eventsWillBeFiredOnce[e][b]);return!0},c.prototype.removeListener=function(c,a){this._events[c].splice(a,1)},c.prototype.removeListeners=function(b){return"string"==typeof b&&!!this._events.hasOwnProperty(b)&&(this._events[b]=[],this._eventsWillBeFiredOnce.hasOwnProperty(b)&&(this._eventsWillBeFiredOnce[b]=[]),!0)},c.prototype.flushEventEmitter=function(){this._events={},this._eventsWillBeFiredOnce={}},b.exports=c},{}],2:[function(a,b){function c(a={}){function b(){const a=k[o];a!=i.value&&(i.value=a,h.emit("update"))}function c(){"visible"!=i.value&&(i.value="visible",h.emit("update"))}function e(){"hidden"!=i.value&&(i.value="hidden",h.emit("update"))}function f(){"undefined"==typeof j||"undefined"==typeof k||!0===i.started||("modern"==p?k.addEventListener(m+"visibilitychange",b,0):"focus-blur"==p?(j.addEventListener("focus",c,!0),j.addEventListener("blur",e,!0)):"focus-blur-ie"==p&&(k.attachEvent("onfocusin",c),k.attachEvent("onfocusout",e)),i.started=!0)}function g(){"undefined"==typeof j||"undefined"==typeof k||!1===i.started||("modern"==p?k.removeEventListener(m+"visibilitychange",b,1):"focus-blur"==p?(j.removeEventListener("focus",c,!0),j.removeEventListener("blur",e,!0)):"focus-blur-ie"==p&&(k.detachEvent("onfocusin",c),k.detachEvent("onfocusout",e)),i.started=!1)}const h=new d({}),i={error:null,started:!1,value:"visible"},j=a.window||("undefined"==typeof window?void 0:window),k=a.document||("undefined"==typeof document?void 0:document);("undefined"==typeof j||"undefined"==typeof k)&&(i.error="INVALID_GLOBALS");let l=[];"undefined"!=typeof k&&(l=["webkit","ms","o","moz","khtml"].filter(a=>a+"Hidden"in k));const m=l&&0<l.length?l[0]:"",n=m+(0<m.length?"H":"h")+"idden",o=m+(0<m.length?"V":"v")+"isibilityState";let p=null;return"undefined"!=typeof k&&(p=n in k?"modern":k.addEventListener?"focus-blur":"focus-blur-ie"),{emitter:h,start:f,pause:g,getError:function(){return i.error},getState:function(){return i.value}}}const d=a("event-emitter-object");b.exports=c},{"event-emitter-object":1}]},{},[2])(2)});